{"version":3,"file":"keyedPool.js","names":["Duration","_interopRequireWildcard","require","Equal","_Function","Hash","HashMap","MutableRef","Option","_Pipeable","Predicate","core","fiberRuntime","pool","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","prototype","hasOwnProperty","call","i","set","KeyedPoolSymbolKey","KeyedPoolTypeId","exports","Symbol","for","KeyedPoolMapValueSymbol","keyedPoolVariance","_K","_","_E","_A","KeyedPoolImpl","getOrCreatePool","activePools","constructor","key","flatMap","invalidate","item","forEachSequentialDiscard","pipe","pipeArguments","arguments","Complete","_tag","symbol","string","combine","hash","isComplete","equals","isTagged","Pending","deferred","isPending","makeImpl","min","max","timeToLive","all","context","fiberId","sync","make","empty","scopeMake","map","scope","suspend","value","getOrUndefined","undefined","uninterruptibleMask","restore","deferredUnsafeMake","previous","update","scopeExtend","makeWithTTL","acquire","provideContext","getOrElse","infinity","matchCauseEffect","onFailure","cause","current","remove","zipRight","deferredFailCause","failCause","onSuccess","as","deferredSucceed","succeed","deferredAwait","forEachSequential","Array","from","values","options","size","none","makeWith","decode","some","makeWithTTLBy","dual","self"],"sources":["../../../src/internal/keyedPool.ts"],"sourcesContent":[null],"mappings":"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"}