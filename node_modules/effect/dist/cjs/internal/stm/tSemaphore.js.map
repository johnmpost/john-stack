{"version":3,"file":"tSemaphore.js","names":["Cause","_interopRequireWildcard","require","Effect","_Function","STM","core","tRef","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","prototype","hasOwnProperty","call","i","set","TSemaphoreSymbolKey","TSemaphoreTypeId","exports","Symbol","for","TSemaphoreImpl","permits","constructor","make","map","acquire","self","acquireN","dual","withSTMRuntime","driver","IllegalArgumentException","value","unsafeGet","journal","retry","succeed","unsafeSet","available","release","releaseN","current","withPermit","semaphore","withPermits","uninterruptibleMask","restore","zipRight","commit","ensuring","withPermitScoped","withPermitsScoped","acquireReleaseInterruptible","unsafeMakeSemaphore","TRefImpl"],"sources":["../../../../src/internal/stm/tSemaphore.ts"],"sourcesContent":[null],"mappings":"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"}