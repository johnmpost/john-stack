{"version":3,"file":"contextPatch.js","names":["Chunk","_interopRequireWildcard","require","Equal","Dual","_context","_data","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","prototype","hasOwnProperty","call","i","set","ContextPatchTypeId","exports","Symbol","for","variance","PatchProto","Structural","_Value","_Patch","EmptyProto","assign","create","_tag","_empty","empty","AndThenProto","makeAndThen","first","second","o","AddServiceProto","makeAddService","tag","service","RemoveServiceProto","makeRemoveService","UpdateServiceProto","makeUpdateService","update","diff","oldValue","newValue","missingServices","Map","unsafeMap","patch","newService","entries","old","delete","equals","combine","dual","self","that","context","wasServiceUpdated","patches","of","updatedContext","isNonEmpty","head","headNonEmpty","tail","tailNonEmpty","prepend","makeContext","map","s"],"sources":["../../../../src/internal/differ/contextPatch.ts"],"sourcesContent":[null],"mappings":"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"}