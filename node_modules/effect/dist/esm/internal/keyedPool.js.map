{"version":3,"file":"keyedPool.js","names":["Duration","Equal","dual","pipe","Hash","HashMap","MutableRef","Option","pipeArguments","Predicate","core","fiberRuntime","pool","KeyedPoolSymbolKey","KeyedPoolTypeId","Symbol","for","KeyedPoolMapValueSymbol","keyedPoolVariance","_K","_","_E","_A","KeyedPoolImpl","getOrCreatePool","activePools","constructor","get","key","flatMap","invalidate","item","forEachSequentialDiscard","arguments","Complete","_tag","symbol","string","combine","hash","u","isComplete","equals","isTagged","Pending","deferred","isPending","makeImpl","min","max","timeToLive","all","context","fiberId","sync","make","empty","scopeMake","map","scope","suspend","value","getOrUndefined","undefined","uninterruptibleMask","restore","deferredUnsafeMake","previous","has","update","set","scopeExtend","makeWithTTL","acquire","provideContext","getOrElse","infinity","matchCauseEffect","onFailure","cause","current","remove","zipRight","deferredFailCause","failCause","onSuccess","as","deferredSucceed","succeed","deferredAwait","forEachSequential","Array","from","values","options","size","none","makeWith","decode","some","makeWithTTLBy","self"],"sources":["../../../src/internal/keyedPool.ts"],"sourcesContent":[null],"mappings":"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"}