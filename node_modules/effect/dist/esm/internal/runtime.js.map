{"version":3,"file":"runtime.js","names":["Context","Exit","Fiber","FiberId","FiberRefs","pipe","format","NodeInspectSymbol","Option","pipeArguments","Predicate","_scheduler","InternalCause","core","FiberRuntime","fiberScope","OpCodes","runtimeFlags","_supervisor","unsafeFork","runtime","self","options","fiberId","unsafeMake","effect","fiberRefUpdates","currentContext","context","scheduler","push","currentScheduler","fiberRefs","updateManyAs","entries","forkAs","updateRefs","fiberRuntime","supervisor","none","onStart","addObserver","exit","onEnd","globalScope","add","start","unsafeRunCallback","onExit","id","onExitInterrupt","interruptAs","flatten","unsafeRunSync","result","unsafeRunSyncExit","_tag","fiberFailure","i0","asyncFiberException","fiber","limit","Error","stackTraceLimit","error","message","Object","defineProperties","value","name","toString","get","isAsyncFiberException","u","isTagged","FiberFailureId","Symbol","for","FiberFailureCauseId","cause","prettyErrors","length","head","split","substring","stack","pretty","toJSON","_id","isFiberFailure","hasProperty","fastPath","op","_op","exitFail","left","exitSucceed","right","NoSuchElementException","SyncScheduler","flush","unsafePoll","unsafeRunPromise","unsafeRunPromiseExit","then","OP_SUCCESS","OP_FAILURE","Promise","resolve","RuntimeImpl","constructor","arguments","make","withFiberRuntime","state","status","succeed","getFiberRef","getFiberRefs","defaultRuntimeFlags","Interruption","CooperativeYielding","RuntimeMetrics","defaultRuntime","empty","unsafeRunEffect","unsafeForkEffect","unsafeRunPromiseEffect","unsafeRunPromiseExitEffect","unsafeRunSyncEffect","unsafeRunSyncExitEffect","asyncEffect","register","flatMap","deferredMake","deferred","uninterruptibleMask","restore","zipRight","fork","catchAllCause","cb","intoDeferred","deferredFailCause","deferredAwait"],"sources":["../../../src/internal/runtime.ts"],"sourcesContent":[null],"mappings":"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"}