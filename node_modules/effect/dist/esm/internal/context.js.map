{"version":3,"file":"context.js","names":["Equal","dual","globalValue","Hash","format","NodeInspectSymbol","toJSON","pipeArguments","hasProperty","EffectPrototype","effectVariance","option","TagTypeId","Symbol","for","STMSymbolKey","STMTypeId","TagProto","_tag","_op","_Service","_","_Identifier","toString","_id","identifier","stack","of","self","context","make","tagRegistry","Map","makeTag","has","get","limit","Error","stackTraceLimit","creationError","tag","Object","create","defineProperty","set","TypeId","ContextProto","_Services","symbol","that","isContext","unsafeMap","size","k","keys","equals","number","pipe","arguments","services","Array","from","map","makeContext","serviceNotFoundError","error","String","lines","split","length","afterAt","match","message","splice","join","u","isTag","_empty","empty","service","add","unsafeGet","getOption","none","some","merge","s","pick","tags","tagSet","Set","newEnv","entries","omit","delete"],"sources":["../../../src/internal/context.ts"],"sourcesContent":[null],"mappings":"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"}